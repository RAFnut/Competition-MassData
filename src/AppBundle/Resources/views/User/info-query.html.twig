{# dobijas podatke u promenljivoj query #}
<!doctype>
<html>
    <head>
        {% include 'AppBundle:Templates:required-css.html.twig' %}
        <link href="{{ asset('bundles/app/css/job-list.css') }}" rel="stylesheet">
    </head>

    <body>
        
        <nav class="navbar navbar-default">
          <div class="container-fluid">
            <div class="navbar-header">
            <div class="logo-holder">
                <a href="#"><img src="{{ asset('bundles/app/img/logo.png') }}"></a>
            </div>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">


              <ul class="nav navbar-nav navbar-right">

                <li><button type="submit" class="btn btn-navigation">Home</button></li>
                {% if premium == true %}
                    <li><a href="#"><button type="submit" class="btn btn-navigation">Tracking</button></a></li>
                {% endif %}
                <li><a href="{{path('premium_queries_list')}}"><button type="submit" class="btn btn-navigation">History</button></a></li>
                <li><a href="{{path('logout')}}"><button type="submit" class="btn btn-navigation">Log out</button></a></li>
              </ul>
            </div>
          </div>
        </nav>

        <div style="height: 500px;" id="GoodMap"></div>        

        <script type="text/javascript">

            var dataGood = [];
            {% for tweet in query.tweet %}
                dataGood[{{loop.index0}}].tweet = "{{tweet.text|replace({"\n":' ', "\r":' '})}}";
                dataGood[{{loop.index0}}].lat = "{{tweet.lat}}";
                dataGood[{{loop.index0}}].lng = "{{tweet.lng}}";
            {% endfor %}    

            var mapGood;
            var boundsGood = new google.maps.LatLngBounds();
            var mapOptionsGood = {
                mapTypeId: 'roadmap'
            };

            mapGood = new google.maps.Map(document.getElementById("GoodMap"), mapOptionsGood);
            map.setTilt(45);

            var infoWindow = new google.maps.InfoWindow(), marker, i;

            for( i = 0; i < data.length; i++ ) {
            var position = new google.maps.LatLng(data[i].lat,data[i].lng);
            bounds.extend(position);
            marker = new google.maps.Marker({
                position: position,
                map: map,
                title: "Marker"
            });

            google.maps.event.addListener(marker, 'click', (function(marker, i) {
                return function() {
                    var content;
                    var slika;
                    content = "Content "+i;
                    infoWindow.setContent(content);
                    infoWindow.open(map, marker);
                }
            })(marker, i));
            map.fitBounds(bounds);    

        </script>
 

        <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?v=3.exp&signed_in=true"></script>

        {% include 'AppBundle:Templates:required-js.html.twig' %}



    <body>
</html>